<ion-content [fullscreen]="true" class="auth-content">
  <!-- Decorative Background Shapes -->
  <div class="blob blob-top"></div>
  <div class="blob blob-bottom"></div>

  <div class="auth-wrapper">
    <div class="logo-container">
      <div class="logo-icon">
        <img src="assets/icon/favicon.png" alt="LE News" class="logo-img" />
      </div>
      <h1>LE News</h1>
      <p>Stay informed, stay ahead</p>
    </div>

    <ion-card class="auth-card">
      <ion-card-content>
        <ion-segment [value]="isLogin ? 'login' : 'register'" (ionChange)="toggleMode()" class="custom-segment">
          <ion-segment-button value="login">
            <ion-label>Login</ion-label>
          </ion-segment-button>
          <ion-segment-button value="register">
            <ion-label>Register</ion-label>
          </ion-segment-button>
        </ion-segment>

        <div class="form-container ion-margin-top">
          @if (!isLogin) {
          <ion-item lines="none" class="custom-input">
            <ion-icon name="person-outline" slot="start"></ion-icon>
            <ion-input label="Full Name" labelPlacement="stacked" [(ngModel)]="userData.name" type="text"
              placeholder="Name"></ion-input>
          </ion-item>
          }

          <ion-item lines="none" class="custom-input">
            <ion-icon name="mail-outline" slot="start"></ion-icon>
            <ion-input label="Email Address" labelPlacement="stacked" [(ngModel)]="userData.email" type="email"
              placeholder="email@example.com"></ion-input>
          </ion-item>

          <ion-item lines="none" class="custom-input">
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-input label="Password" labelPlacement="stacked" [(ngModel)]="userData.password" type="password"
              placeholder="••••••••"></ion-input>
          </ion-item>

          <ion-button expand="block" shape="round" class="action-btn" (click)="onSubmit()">
            {{ isLogin ? 'Sign In' : 'Create Account' }}
            <ion-icon slot="end" [name]="isLogin ? 'log-in-outline' : 'person-add-outline'"></ion-icon>
          </ion-button>

          <!-- Quick Login for Biometric Users -->
          @if (isLogin && availableUsers.length > 0) {
          <div class="bio-container">
            <div class="divider">
              <span>Quick Login</span>
            </div>

            <div class="user-list">
              @for (user of availableUsers; track user.email) {
              <ion-item lines="none" class="user-item" (click)="loginWithUser(user)" [disabled]="isBiometricLoading">
                <ion-avatar slot="start">
                  <img [src]="user.avatarUrl" />
                </ion-avatar>
                <ion-label>
                  <h2>{{ user.name }}</h2>
                  <p>Tap to login with biometrics</p>
                </ion-label>
                <ion-icon name="finger-print-outline" slot="end" color="primary"></ion-icon>
              </ion-item>
              }
            </div>
          </div>
          }
        </div>
      </ion-card-content>
    </ion-card>

    <div class="footer-text">
      <p>By continuing, you agree to our Terms of Service</p>
    </div>
  </div>
</ion-content>